# The synchronizer module to use TI mmWave radars in SAR configuration

This module is built to count the rising edges of the pulses generated by a typical motion controller, where the number of generated pulses corresponds to a certain movement distance in a typical linear scanner. Depending on the sampling time, the module then generates HW trigger pulses for TI's mmWave sensors to capture radar data at the predefined sampling intervals.

For detailed information about the synchronizer module and typical scanners used for TI mmWave sensor based SAR setups, please refer to the following paper:

* Cite as: M. E. Yanik, D. Wang and M. Torlak, "Development and Demonstration of MIMO-SAR mmWave Imaging Testbeds," in IEEE Access, vol. 8, pp. 126019-126038, 2020, doi: 10.1109/ACCESS.2020.3007877 (Link: https://ieeexplore.ieee.org/document/9136646)

## How to use example

### Hardware Required

* A development board with ESP32 SoC (e.g., ESP32-DevKitC, ESP-WROVER-KIT, etc.)
* A USB cable for power supply and programming

### Pin connections:
In this module:

* GPIO0 is the default pulse input pin, which should be connected to the motion controller that generates pulses.
* GPIO4 is the default radar trigger pin, which should be connected to the radar SYNC_IN pin for HW triggering.

This module also supports a test mode, where an internal pulse generator is being used as:

* GPIO2 is the default output pin of the pulse generator. You need to short GPIO2 and GPIO0 to count the pulses and generate radar HW trigger over GPIO4.

### Configure the project

```
idf.py menuconfig
```

* Set serial port under Serial Flasher Options.

### Build and Flash

Build the project and flash it to the board, then run monitor tool to view serial output:

```
idf.py -p PORT flash monitor
```

(To exit the serial monitor, type ``Ctrl-]``.)


See the Getting Started Guide for full steps to configure and use ESP-IDF to build projects.

## Example Output


Run this example, and you can see the following output log on the serial monitor:
(Here, GPIO5 is connected to Ground)

```
Current counter value :-1
Current counter value :-2
Current counter value :-3
Current counter value :-4
Event PCNT unit[0]; cnt: -5
THRES0 EVT
Current counter value :-5
Current counter value :-6
Current counter value :-7
Current counter value :-8
Current counter value :-9
Event PCNT unit[0]; cnt: 0
L_LIM EVT
ZERO EVT
Current counter value :0
Current counter value :-1
...
```

## Troubleshooting

* program upload failure

    * Hardware connection is not correct: run `idf.py -p PORT monitor`, and reboot your board to see if there are any output logs.
    * The baud rate for downloading is too high: lower your baud rate in the `menuconfig` menu, and try again.

For any technical queries, please open an [issue](https://github.com/espressif/esp-idf/issues) on GitHub. We will get back to you soon.
